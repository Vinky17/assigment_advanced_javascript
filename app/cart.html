<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <link rel="stylesheet" href="./Css/style.css" />
  <link rel="stylesheet" href="./Css/responsive.css" />
</head>

<body>
  <div class="cart-container">
    <div class="container">
      <!-- Start Header -->
      <header>
        <div class="container">
          <div class="header-top">
            <a href="index.html" class="img-top">
              <img src="./Img/Kyle/Thiết kế không tên.png" alt="" /></a>
            <ul class="header-nav">
              <li><a href="index.html">Trang chủ</a></li>
              <li class="products-dropdown">
                <a href="product.html">Sản phẩm</a>
                <ul class="dropdown">
                  <!-- <li><a href="#">Áo</a></li>
                  <li><a href="#">Váy</a></li>
                  <li><a href="#">Đầm</a></li>
                  <li><a href="#">Quần</a></li> -->
                </ul>
              </li>
              <li><a href="intro.html">Giới thiệu</a></li>
              <li><a href="form.html">Đăng nhập/Đăng ký</a></li>
              <li class="header-search">
                <a href="#" id="header-search">
                  <ion-icon name="search-outline"></ion-icon>
                </a>
                <div class="search-container">
                  <ul class="search-box">
                    <li class="search-item">
                      <form action="" method="post" class="search-form">
                        <div class="search-input">
                          <input type="text" placeholder="Tìm kiếm..." />
                        </div>
                        <div class="search-icon">
                          <a href="#" class="icon">
                            <ion-icon name="search-outline"></ion-icon>
                          </a>
                        </div>
                      </form>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <a href="cart.html">
                  <ion-icon name="cart-outline"></ion-icon>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </header>
      <!-- End header -->

      <!-- Responsive Header -->
      <div class="responsive-header">
        <div class="header-item">
          <a id="hamburger" href="#">
            <ion-icon name="menu-outline"></ion-icon>
          </a>
        </div>
        <div class="header-item header-top">
          <a href="index.html" class="img-top">
            <img src="./Img/Kyle/Thiết kế không tên.png" alt="" /></a>
        </div>
        <div class="header-item">
          <a href="#">
            <ion-icon name="cart-outline"></ion-icon>
          </a>
        </div>
      </div>
      <!-- End Responsive Header -->

      <div class="tittle-main" style="text-align: left">
        <h3>Giỏ hàng</h3>
      </div>
      <div class="cart">
        <div class="cart__left">
          <div class="cart__table">
            <!-- table cart -->
            <table>
              <tr>
                <th style="text-align: left">Sản phẩm</th>
                <th>Tên</th>
                <th>Số lượng</th>
                <th>Tổng tiền</th>
                <th>Xóa</th>
              </tr>
              <tbody id="my-cart">

                <!-- <tr class="cart__item">
                  <td>
                    <a href="#"><img src="./Img/gina-dress.png" alt="" /></a>
                  </td>
                  <td>
                    <p>Gina Dress</p>
                    <p>S</p>
                  </td>
                  <td>
                    <div class="cart__count">
                      <input type="button" value="-" />
                      <input type="text" min="1" value="1" disabled />
                      <input type="button" value="+" />
                    </div>
                  </td>
                  <td>280.000vnđ</td>
                  <td>
                    <a href="#" class="trash">
                      <ion-icon name="trash-outline"></ion-icon>
                    </a>
                  </td>
                </tr> -->

              </tbody>
            </table>
            <div class="cart__continue">
              <a href="#">Tiếp tục mua sắm</a>
            </div>
            <!-- End table  -->
          </div>
        </div>
        <div class="cart__right">
          <div class="cart__caculate">
            <div class="cart__total">
              <div class="cart__total__top">
                <p>Tổng tiền</p>
                <p id="total"></p>
              </div>
              <div class="cart__total__final">
                <a class="create-order">Thanh toán</a>
              </div>
            </div>
            <div class="cart_note">
              <div class="cart__note__item">
                <label for="">Ghi chú</label>
                <textarea name="" id="" cols="30" placeholder="Bạn muốn mô tả rõ hơn về đơn hàng..."></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="overlay">
      <div class="overlay-header-container">
        <div class="overlay-header-box">
          <ul id="menu-sidebar">
            <li>
              <form method="post" action="">
                <div class="search-small">
                  <input type="text" placeholder="Tìm kiếm..." />
                  <button>
                    <ion-icon name="search-outline"></ion-icon>
                  </button>
                </div>
              </form>
            </li>
            <li><a href="index.html">Trang chủ</a></li>
            <li>
              <a href="product.html">Sản phẩm </a><a id="mobile-dropdown">
                <ion-icon name="chevron-down-outline"></ion-icon>
              </a>
              <ul class="dropdown-responsive">
              </ul>
            </li>
            <li><a href="intro.html">Giới thiệu</a></li>
            <li><a href="form.html">Đăng nhập/Đăng ký</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="alert hide">
      <span class="fas fa-exclamation-circle"></span>
      <span class="msg">Xóa sản phẩm thành công!</span>
      <div class="close-btn">
        <ion-icon name="close-outline"></ion-icon>
      </div>
    </div>
  </div>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script src="./Js/cart-api.js"></script>
  <script src="./Js/categories-api.js"></script>
  <script>

    // tính tiền
    function reBill(price, quatity, index) {
      let newPrice = price * quatity;

      document.getElementsByClassName('summary')[index].innerHTML = newPrice + 'vnđ';

      total();
    }

    // Xóa sản phẩm trong giỏ hàng
    let cart = JSON.parse(localStorage.getItem('cart'));
    if (cart.length === 0) localStorage.removeItem('cart');

    document.querySelector('.close-btn').onclick = () => {
      alert.classList.remove('show');
      alert.classList.add('hide');
    }
    let alert = document.querySelector('.alert');

    function removeFromCart(id, index) {
      alert.classList.add('show');
      alert.classList.remove('hide');
      alert.classList.add('showAlert');

      setTimeout(function () {
        alert.classList.remove('show');
        alert.classList.add('hide')
      }, 100);

      if (cart) cart.splice(index, 1);

      localStorage.setItem('cart', JSON.stringify(cart));
    }

    // Tăng số lượng sản phẩm trong giỏ hàng
    function increaseQuatity(id, price, index) {
      let quatityValue = document.querySelectorAll('#product-quatity');

      quatityValue[index].value++;

      cart.forEach(item => {
        item.quatity++;

        localStorage.setItem('cart', JSON.stringify(cart));
      })

      let newPrice = price * quatityValue[index].value;

      document.getElementsByClassName('summary')[index].innerHTML = newPrice + "vnđ";
      total();

    }

    // Giảm số lượng sản phẩm trong giỏ hàng
    function decreaseQuatity(id, price, index) {
      let quatityValue = document.querySelectorAll('#product-quatity');

      quatityValue[index].value--;

      cart.forEach(item => {
        item.quatity--;

        localStorage.setItem('cart', JSON.stringify(cart));
      })

      let newPrice = price * quatityValue[index].value;

      document.getElementsByClassName('summary')[index].innerHTML = newPrice + "vnđ";

      total();
    }

    // tổng tiền
    function total() {
      let summarys = document.getElementsByClassName('summary');
      let total = 0;

      for (let summary of summarys) {
        total += parseInt(summary.innerText);
      }
      document.getElementById('total').innerText = total + "vnđ";
    }

    const paymentButton = document.querySelector('.create-order');
    paymentButton.onclick = function () {
      document.location = './shipping.html';
    }

  </script>
</body>

</html>